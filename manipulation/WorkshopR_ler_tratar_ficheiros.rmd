---
title: "workshopR_ler_tratar_ficheiros"
author: "Xavier Pinho"
date: "21 de Marco de 2018"
output:
  html_document:
    df_print: paged
---

library(dplyr)
library(tidyr)

###Criar uma directoria para este ficheiro
```{r}
home <- 'C:/Users/Xavier/Documents/R/workshopR_jest'
setwd(home)
```


###Ler e tratar ficheiros

data.frames forma mais comum de armazenar e manipular dados no R.
data.frames s?o listas de vetores todos com o mesmo comprimento.

As fun??es mais importantes para ler ficheiros s?o:
```{r}
read.table()
read.csv()
read.csv2()
read.delim()
```
entre outras
Todas estas fun??es l?m um ficheiro e criam um data frame.

Argumentos:
file -> url completo, nome.formato, entre aspas
Header = TRUE -> primeira linha contem os titulos
sep = "" -> de que forma os dados est?o separados
fill = TRUE -> caso haja linhas de diferentes tamanhos adiciona espacos brancos
dec -> caracter usado nos numeros decimais

Principais diferen?as:

O read.table() ? o formato mais comum para importar ficheiros, a fun??o j? tem os argumentos definidos por defini??o, contudo ? poss?vel alter?-los da forma que n?s quisermos.

```{r}
df1 <- read.table("survey.csv", header = FALSE, sep = "", fill = TRUE , dec = ".")

df2 <- read.csv("survey.csv", header = T , sep = ",", fill = TRUE , dec = ".")
#TRUE OU T, FALSE OU F

df3 <- read.csv2("file", header = TRUE, sep = ";", fill = TRUE , dec = ",")

df4 <- read.delim("file", header = TRUE, sep = "\t", fill = TRUE , dec = ".")
```

#Exerc?cio 1:
Depois de observar a base de dados indique qual destas fun??es ? a mais apropriada para ler o ficheiro?
a) read.table
b) read.csv
c) read.csv2
d) read.delim

Depois do data frame estar criado ? poss?vel alter?-lo da maneira como quisermos.

Caso o data frame nao tenha titulos nas colunas, e possevel adicionar um vetor com os titulos, atraves de col.names.
Podemos tambem definir o tipo de variaveis de cada coluna atraves de colClasses.

```{r}
df5 <- read.csv("file", header = FALSE, col.names = c("coluna1", "coluna2", "coluna3"))

df6 <- read.csv("file", header = FALSE, colClasses = c("factor", "NULL", "numeric"))
#A coluna a que corresponde o "NULL" desaparece.
```



#Representacao do data frame
```{r}
str()
#informacao sobre a estrutura do objeto
summary()
#informacao estatistica sobre todas as variaveis do data frame
head()
#exibe a parte superior do objeto
tail()
#exibe a parte inferior do objeto

```

Agora que j? temos uma no??o da estrutura e da forma como o nosso data frame est? organizado, podemos organiz?-lo da maneira mais conveniente.

```{r}
low_to_high <- arrange(df2, Age)
#subset da coluna Age do menor valor para o maior
high_to_low <- arrange(df2, desc(Age))
#subset da coluna Age do maior valor para o menor

subset1 <- filter(df2, Age > 50)
#subset que cont?m apenas as linhas onde a idade ? superior a 50

subset2 <- select(df2, Age, Gender, state)
#subset que agrupa as colunas Age, gender, state

subset3 <- select(df2, contains("f"))
#subset que contem as colunas em que o nome tem um f

#Fun??es
primeiro <- first(df2$Age)

ultimo <- last(df2$Age)

minimo <- min(df2$Age)
#ou
df2[which.min(df2$Age), ]

maximo <- max(df2$Age)
#ou
df2[which.max(df2$Age), ]

media <- mean(df2$Age)

variancia <- var(df2$Age)

desvio_padrao <- sd(df2$Age)

```
#Exercicio 2:
Criar um vetor com apenas as linhas que tenham idades compreendidas entre 20 e 25:
Dica: & -> significa 'e' ou 'interse??o'



#FALTA: aceder coluna, apagar, adicionar colunas, valores, na.remove/omit
